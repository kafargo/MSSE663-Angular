<form [formGroup]="triangleForm" class="triangle-form">
  <div class="form-group">
    <label for="perimeter-{{ uniqueId }}">Perimeter:</label>
    <div class="input-container">
      <input
        type="number"
        id="perimeter-{{ uniqueId }}"
        formControlName="perimeter"
        [class.error]="perimeterControl?.invalid && perimeterControl?.touched"
        step="0.01"
        (blur)="onFieldChange()"
        [attr.aria-invalid]="
          perimeterControl?.invalid && perimeterControl?.touched
        "
        [attr.aria-describedby]="
          perimeterControl?.invalid && perimeterControl?.touched
            ? 'perimeter-error-' + uniqueId
            : null
        "
        aria-required="true"
      />
      <div
        class="validation-error"
        [id]="'perimeter-error-' + uniqueId"
        *ngIf="perimeterControl?.invalid && perimeterControl?.touched"
        role="alert"
        aria-live="assertive"
      >
        <span *ngIf="perimeterControl?.errors?.['required']"
          >Perimeter is required</span
        >
        <span *ngIf="perimeterControl?.errors?.['min']"
          >Perimeter must be positive</span
        >
      </div>
    </div>
  </div>

  <div class="form-group">
    <label for="area-{{ uniqueId }}">Area:</label>
    <div class="input-container">
      <input
        type="number"
        id="area-{{ uniqueId }}"
        formControlName="area"
        [class.error]="areaControl?.invalid && areaControl?.touched"
        step="0.01"
        (blur)="onFieldChange()"
        [attr.aria-invalid]="areaControl?.invalid && areaControl?.touched"
        [attr.aria-describedby]="
          areaControl?.invalid && areaControl?.touched
            ? 'area-error-' + uniqueId
            : null
        "
        aria-required="true"
      />
      <div
        class="validation-error"
        [id]="'area-error-' + uniqueId"
        *ngIf="areaControl?.invalid && areaControl?.touched"
        role="alert"
        aria-live="assertive"
      >
        <span *ngIf="areaControl?.errors?.['required']">Area is required</span>
        <span *ngIf="areaControl?.errors?.['min']">Area must be positive</span>
      </div>
    </div>
  </div>

  <div class="form-group">
    <fieldset>
      <legend>Triangle Type</legend>
      <div class="radio-group" role="radiogroup" aria-required="true">
        <div class="radio-option" *ngFor="let type of triangleTypes">
          <input
            type="radio"
            [id]="'type-' + type + '-' + uniqueId"
            [value]="type"
            formControlName="type"
            (change)="onFieldChange()"
            [attr.aria-describedby]="
              typeControl?.invalid && typeControl?.touched
                ? 'type-error-' + uniqueId
                : null
            "
          />
          <label [for]="'type-' + type + '-' + uniqueId">{{ type }}</label>
        </div>
        <div
          class="validation-error"
          id="type-error-{{ uniqueId }}"
          *ngIf="typeControl?.invalid && typeControl?.touched"
          role="alert"
          aria-live="assertive"
        >
          <span *ngIf="typeControl?.errors?.['required']"
            >Type is required</span
          >
        </div>
      </div>
    </fieldset>
  </div>
</form>
